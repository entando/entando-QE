{
	"info": {
		"_postman_id": "f9ab7ace-3385-497b-8968-42574c2627ca",
		"name": "Data-Types",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Get the Data Types",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "d47be7c3-75cb-4937-9c19-c435f3275667",
						"type": "text/javascript",
						"exec": [
							"eval(globals.status_code_ok)();",
							"eval(globals.response_time_limit)();",
							"",
							"var data = JSON.parse(responseBody);",
							"var payload = data.payload;",
							"var errors = data.errors;",
							"var metaData = data.metaData;",
							"",
							"eval(globals.validate_response)(data);",
							"",
							"pm.test(\"Response payload is not empty Array (payload != [])\", function(){",
							"    pm.expect(payload.length).to.be.above(0);",
							"});",
							"pm.test(\"Response errors is empty (errors = [])\", function(){",
							"   pm.expect(errors.length).to.eql(0);",
							"});",
							"pm.test(\"Response metaData attributes match contract structure\", function(){",
							"    pm.expect(metaData.page).to.eql(1);",
							"    pm.expect(metaData.pageSize).to.eql(5);",
							"    pm.expect(metaData.sort).to.eql(\"code\");",
							"    pm.expect(metaData.direction).to.eql(\"ASC\");",
							"    pm.expect(metaData.filters.length).to.eql(0);",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{url}}/api/dataTypes?page=1&pageSize=5",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"dataTypes"
					],
					"query": [
						{
							"key": "page",
							"value": "1"
						},
						{
							"key": "pageSize",
							"value": "5"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "Get the Data Types list with not valid filter",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "efaeedca-b6c5-4d74-8f7c-d7b5a678e2bc",
						"type": "text/javascript",
						"exec": [
							"eval(globals.status_code_bad_request)();",
							"eval(globals.response_time_limit)();",
							"",
							"var data = JSON.parse(responseBody);",
							"var payload = data.payload;",
							"var errors = data.errors;",
							"var metaData = data.metaData;",
							"",
							"eval(globals.validate_response)(data);",
							"pm.test(\"Response payload is empty (payload = [])\", function(){",
							"    pm.expect(payload.length).to.eql(0);",
							"});",
							"pm.test(\"Response error code is ok (code = 110)\", function(){",
							"    pm.expect(errors[0].code).to.eql(\"110\");",
							"});",
							"pm.test(\"Response error message is ok (message = 'page must be equal or greater than 1')\", function(){",
							"    pm.expect(errors[0].message).to.include(\"equal or greater than 1\");",
							"});",
							"pm.test(\"Response metaData is empty (metaData = {})\", function(){",
							"    pm.expect(eval(globals.is_empty)(metaData)).to.be.true;",
							"});",
							""
						]
					}
				}
			],
			"request": {
				"method": "GET",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					}
				],
				"body": {
					"mode": "raw",
					"raw": ""
				},
				"url": {
					"raw": "{{url}}/api/dataTypes?page=0&pageSize=1",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"dataTypes"
					],
					"query": [
						{
							"key": "page",
							"value": "0"
						},
						{
							"key": "pageSize",
							"value": "1"
						}
					]
				}
			},
			"response": []
		},
		{
			"name": "POST the Data Type with the existing code",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "f26e0ffd-4c93-48b5-99d0-4c940a3d6cbf",
						"type": "text/javascript",
						"exec": [
							"eval(globals.status_code_conflict)();",
							"eval(globals.response_time_limit)();",
							"",
							"var data = JSON.parse(responseBody);",
							"var payload = data.payload;",
							"var errors = data.errors;",
							"var metaData = data.metaData;",
							"",
							"eval(globals.validate_response)(data);",
							"pm.test(\"Response payload is empty (payload = [])\", function(){",
							"    pm.expect(payload.length).to.eql(0);",
							"});",
							"pm.test(\"Response error code is ok (code = 1)\", function(){",
							"    pm.expect(errors[0].code).to.eql(\"1\");",
							"});",
							"pm.test(\"Response error message is ok (message = 'The Type AAA already exists')\", function(){",
							"    pm.expect(errors[0].message).to.include(\"already exists\");",
							"});",
							"pm.test(\"Response metaData is empty (metaData = {})\", function(){",
							"    pm.expect(eval(globals.is_empty)(metaData)).to.be.true;",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"MyDataType11\",\n    \"code\": \"AAA\",\n    \"attributes\": [{\n        \"type\": \"Date\",\n        \"code\": \"CCC\",\n        \"name\": \"MyDate2\",\n        \"status\": \"0\",\n        \"roles\": [{\n            \"code\": \"firstCode\",\n            \"descr\": \"firstCode\"\n        },{\n            \"code\": \"secondCode\",\n            \"descr\": \"secondDescr\"\n        }],\n        \"disablingCodes\": [\n            \"firstDisablingCode\",\n            \"secondDisablingCode\"\n        ],\n        \"mandatory\": true,\n        \"listFilter\": true,\n        \"indexable\": true,\n        \"enumeratorStaticItems\": null,\n        \"enumeratorStaticItemsSeparator\": null,\n        \"enumeratorExtractorBean\": null,\n        \"validationRules\": {\n            \"ognlValidation\": {\n                \"ognlExpression\": \"expression\",\n                \"applyOnlyToFilledAttr\": false,\n                \"helpMessage\": \"Help message\",\n                \"keyForHelpMessage\": null,\n                \"errorMessage\": \"Error Message\",\n                \"keyForErrorMessage\": null\n            },\n            \"minLength\": null,\n            \"maxLength\": null,\n            \"regex\": null,\n            \"rangeStartString\": null,\n            \"rangeEndString\": null,\n            \"rangeStartStringAttribute\": null,\n            \"rangeEndStringAttribute\": null,\n            \"equalString\": null,\n            \"equalStringAttribute\": null,\n            \"rangeStartDate\": null,\n            \"rangeEndDate\": null,\n            \"rangeStartDateAttribute\": null,\n            \"rangeEndDateAttribute\": null,\n            \"equalDate\": null,\n            \"equalDateAttribute\": null,\n            \"rangeStartNumber\" : null,\n                \"rangeStartNumberAttribute\" : null,\n            \"rangeEndNumber\" : null,\n            \"rangeEndNumberAttribute\" : null,\n            \"equalNumber\" : null,\n            \"equalNumberAttribute\" : null\n        },\n        \"nestedAttribute\": null,\n        \"compositeAttributes\": null\n    }],\n      \"viewPage\": null,\n      \"listModel\": null,\n      \"defaultModel\": null\n}"
				},
				"url": {
					"raw": "{{url}}/api/dataTypes",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"dataTypes"
					]
				}
			},
			"response": []
		},
		{
			"name": "POST the new Data Type",
			"event": [
				{
					"listen": "test",
					"script": {
						"id": "f9367a5f-76bd-493e-b05c-711d6284a299",
						"type": "text/javascript",
						"exec": [
							"eval(globals.status_code_ok)();",
							"eval(globals.response_time_limit)();",
							"",
							"var data = JSON.parse(responseBody);",
							"var payload = data.payload;",
							"var errors = data.errors;",
							"var metaData = data.metaData;",
							"",
							"eval(globals.validate_response)(data);",
							"pm.test(\"Data Type code is JJJ\", function(){",
							"    pm.expect(payload.code).to.eql(\"JJJ\");",
							"});",
							"pm.test(\"Response errors is empty (errors = [])\", function(){",
							"   pm.expect(errors.length).to.eql(0);",
							"});",
							"pm.test(\"Response metaData is empty (metaData = {})\", function(){",
							"    pm.expect(eval(globals.is_empty)(metaData)).to.be.true;",
							"});"
						]
					}
				}
			],
			"request": {
				"method": "POST",
				"header": [
					{
						"key": "Authorization",
						"value": "Bearer {{access_token}}"
					},
					{
						"key": "Content-Type",
						"value": "application/json"
					}
				],
				"body": {
					"mode": "raw",
					"raw": "{\n    \"name\": \"MyDataType5\",\n    \"code\": \"JJJ\",\n    \"attributes\": [{\n        \"type\": \"Date\",\n        \"code\": \"FFF\",\n        \"name\": \"MyDate3\",\n        \"status\": \"0\",\n        \"roles\": [{\n            \"code\": \"firstCode\",\n            \"descr\": \"firstCode\"\n        },{\n            \"code\": \"secondCode\",\n            \"descr\": \"secondDescr\"\n        }],\n        \"disablingCodes\": [\n            \"firstDisablingCode\",\n            \"secondDisablingCode\"\n        ],\n        \"mandatory\": true,\n        \"listFilter\": true,\n        \"indexable\": true,\n        \"enumeratorStaticItems\": null,\n        \"enumeratorStaticItemsSeparator\": null,\n        \"enumeratorExtractorBean\": null,\n        \"validationRules\": {\n            \"ognlValidation\": {\n                \"ognlExpression\": \"expression\",\n                \"applyOnlyToFilledAttr\": false,\n                \"helpMessage\": \"Help message\",\n                \"keyForHelpMessage\": null,\n                \"errorMessage\": \"Error Message\",\n                \"keyForErrorMessage\": null\n            },\n            \"minLength\": null,\n            \"maxLength\": null,\n            \"regex\": null,\n            \"rangeStartString\": null,\n            \"rangeEndString\": null,\n            \"rangeStartStringAttribute\": null,\n            \"rangeEndStringAttribute\": null,\n            \"equalString\": null,\n            \"equalStringAttribute\": null,\n            \"rangeStartDate\": null,\n            \"rangeEndDate\": null,\n            \"rangeStartDateAttribute\": null,\n            \"rangeEndDateAttribute\": null,\n            \"equalDate\": null,\n            \"equalDateAttribute\": null,\n            \"rangeStartNumber\" : null,\n                \"rangeStartNumberAttribute\" : null,\n            \"rangeEndNumber\" : null,\n            \"rangeEndNumberAttribute\" : null,\n            \"equalNumber\" : null,\n            \"equalNumberAttribute\" : null\n        },\n        \"nestedAttribute\": null,\n        \"compositeAttributes\": null\n    }],\n      \"viewPage\": null,\n      \"listModel\": null,\n      \"defaultModel\": null\n}"
				},
				"url": {
					"raw": "{{url}}/api/dataTypes",
					"host": [
						"{{url}}"
					],
					"path": [
						"api",
						"dataTypes"
					]
				}
			},
			"response": []
		}
	]
}